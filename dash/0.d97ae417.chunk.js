(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ 2220:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(2));var _reactRouterDom=__webpack_require__(34);var _lodash=__webpack_require__(10);var _strapiHelperPlugin=__webpack_require__(8);var _custom=__webpack_require__(62);var _reactIntl=__webpack_require__(17);var _pluginId=_interopRequireDefault(__webpack_require__(101));var _getRequestUrl=_interopRequireDefault(__webpack_require__(758));var _FieldsReorder=_interopRequireDefault(__webpack_require__(2363));var _FormTitle=_interopRequireDefault(__webpack_require__(2372));var _LayoutTitle=_interopRequireDefault(__webpack_require__(2373));var _PopupForm=_interopRequireDefault(__webpack_require__(2263));var _SettingsViewWrapper=_interopRequireDefault(__webpack_require__(2264));var _SortableList=_interopRequireDefault(__webpack_require__(2374));var _layout=__webpack_require__(2291);var _getComponents=_interopRequireDefault(__webpack_require__(2270));var _LayoutDndProvider=_interopRequireDefault(__webpack_require__(760));var _getInputProps=_interopRequireDefault(__webpack_require__(2376));var _reducer=_interopRequireWildcard(__webpack_require__(2377));const EditSettingsView=({currentEnvironment,deleteLayout,deleteLayouts,componentsAndModelsMainPossibleMainFields,history:{push},plugins,slug})=>{const{componentSlug,type}=(0,_reactRouterDom.useParams)();const{emitEvent}=(0,_strapiHelperPlugin.useGlobalContext)();const[reducerState,dispatch]=(0,_react.useReducer)(_reducer.default,_reducer.initialState);const[isModalFormOpen,setIsModalFormOpen]=(0,_react.useState)(false);const[isDraggingSibling,setIsDraggingSibling]=(0,_react.useState)(false);const fieldsReorderClassName=type==='content-types'?'col-8':'col-12';const abortController=new AbortController();const{signal}=abortController;const{componentLayouts,isLoading,initialData,metaToEdit,modifiedData,metaForm}=reducerState.toJS();const getAttributes=(0,_react.useMemo)(()=>{return(0,_lodash.get)(modifiedData,['schema','attributes'],{});},[modifiedData]);const getName=(0,_react.useMemo)(()=>{return(0,_lodash.get)(modifiedData,['schema','info','name'],'');},[modifiedData]);const getEditLayout=(0,_react.useCallback)(()=>{return(0,_lodash.get)(modifiedData,['layouts','edit'],[]);},[modifiedData]);const getForm=()=>Object.keys((0,_lodash.get)(modifiedData,['metadatas',metaToEdit,'edit'],{})).filter(meta=>meta!=='visible');const getRelationsLayout=(0,_react.useCallback)(()=>{return(0,_lodash.get)(modifiedData,['layouts','editRelations'],[]);},[modifiedData]);const getEditRelationsRemaingFields=()=>{const attributes=getAttributes;const displayedFields=getRelationsLayout();return Object.keys(attributes).filter(attr=>(0,_lodash.get)(attributes,[attr,'type'],'')==='relation').filter(attr=>displayedFields.indexOf(attr)===-1);};const getEditRemainingFields=()=>{const attributes=getAttributes;const metadatas=(0,_lodash.get)(modifiedData,['metadatas'],{});const displayedFields=getEditLayout().reduce((acc,curr)=>[...acc,...curr.rowContent],[]);return Object.keys(attributes).filter(attr=>(0,_lodash.get)(attributes,[attr,'type'],'')!=='relation').filter(attr=>(0,_lodash.get)(metadatas,[attr,'edit','visible'],false)===true).filter(attr=>{return displayedFields.findIndex(el=>el.name===attr)===-1;});};const getSelectedItemSelectOptions=(0,_react.useCallback)(formType=>{if(formType!=='relation'&&formType!=='component'){return[];}const targetKey=formType==='component'?'component':'targetModel';const key=(0,_lodash.get)(modifiedData,['schema','attributes',metaToEdit,targetKey],'');return(0,_lodash.get)(componentsAndModelsMainPossibleMainFields,[key],[]);},[metaToEdit,componentsAndModelsMainPossibleMainFields,modifiedData]);(0,_react.useEffect)(()=>{const getData=async()=>{try{const{data}=await(0,_strapiHelperPlugin.request)((0,_getRequestUrl.default)("".concat(type,"/").concat(slug||componentSlug)),{method:'GET',signal});dispatch({type:'GET_DATA_SUCCEEDED',data:data.contentType||data.component,componentLayouts:data.components});}catch(err){if(err.code!==20){strapi.notification.error('notification.error');}}};getData();return()=>{abortController.abort();};// eslint-disable-next-line react-hooks/exhaustive-deps
},[slug,type,componentSlug]);const handleChange=({target:{name,value}})=>{dispatch({type:'ON_CHANGE',keys:name.split('.'),value});};const handleChangeMeta=({target:{name,value}})=>{dispatch({type:'ON_CHANGE_META',keys:name.split('.'),value});};const handleConfirm=async()=>{try{const body=(0,_lodash.cloneDeep)(modifiedData);// We need to send the unformated edit layout
(0,_lodash.set)(body,'layouts.edit',(0,_layout.unformatLayout)(body.layouts.edit));delete body.schema;delete body.uid;delete body.isComponent;delete body.category;delete body.apiID;await(0,_strapiHelperPlugin.request)((0,_getRequestUrl.default)("".concat(type,"/").concat(slug||componentSlug)),{method:'PUT',body,signal});dispatch({type:'SUBMIT_SUCCEEDED'});if(slug){deleteLayout(slug);}if(componentSlug){deleteLayouts();}emitEvent('didEditEditSettings');}catch(err){strapi.notification.error('notification.error');}};const handleSubmitMetaForm=e=>{e.preventDefault();dispatch({type:'SUBMIT_META_FORM'});toggleModalForm();};const moveItem=(dragIndex,hoverIndex,dragRowIndex,hoverRowIndex)=>{// Same row = just reorder
if(dragRowIndex===hoverRowIndex){dispatch({type:'REORDER_ROW',dragRowIndex,dragIndex,hoverIndex});}else{dispatch({type:'REORDER_DIFF_ROW',dragIndex,hoverIndex,dragRowIndex,hoverRowIndex});}};const moveRow=(dragRowIndex,hoverRowIndex)=>{dispatch({type:'MOVE_ROW',dragRowIndex,hoverRowIndex});};const toggleModalForm=()=>{setIsModalFormOpen(prevState=>!prevState);};const renderForm=()=>getForm().map((meta,index)=>{const formType=(0,_lodash.get)(getAttributes,[metaToEdit,'type']);if(formType==='dynamiczone'&&!['label','description'].includes(meta)){return null;}if((formType==='component'||formType==='media')&&meta!=='label'){return null;}if((formType==='json'||formType==='boolean')&&meta==='placeholder'){return null;}if(formType==='richtext'&&meta==='editable'){return null;}return/*#__PURE__*/_react.default.createElement("div",{className:"col-6",key:meta},/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:"".concat(_pluginId.default,".containers.SettingPage.editSettings.entry.title.description")},description=>/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:(0,_lodash.get)((0,_getInputProps.default)(meta),'label.id','app.utils.defaultMessage')},label=>/*#__PURE__*/_react.default.createElement(_custom.Inputs,{autoFocus:index===0,description:meta==='mainField'?description:'',label:label,name:meta,type:(0,_getInputProps.default)(meta).type,onBlur:()=>{},value:(0,_lodash.get)(metaForm,meta,''),onChange:handleChangeMeta,options:getSelectedItemSelectOptions(formType)}))));});return/*#__PURE__*/_react.default.createElement(_LayoutDndProvider.default,{attributes:getAttributes,buttonData:getEditRemainingFields(),componentLayouts:componentLayouts,goTo:push,isDraggingSibling:isDraggingSibling,layout:getEditLayout(),metadatas:(0,_lodash.get)(modifiedData,['metadatas'],{}),moveItem:moveItem,moveRow:moveRow,onAddData:name=>{dispatch({type:'ON_ADD_DATA',name});},relationsLayout:getRelationsLayout(),removeField:(rowIndex,fieldIndex)=>{dispatch({type:'REMOVE_FIELD',rowIndex,fieldIndex});},setEditFieldToSelect:name=>{dispatch({type:'SET_FIELD_TO_EDIT',name});toggleModalForm();},setIsDraggingSibling:setIsDraggingSibling,selectedItemName:metaToEdit},/*#__PURE__*/_react.default.createElement(_SettingsViewWrapper.default,{inputs:[{label:{id:"".concat(_pluginId.default,".containers.SettingPage.editSettings.entry.title")},description:{id:"".concat(_pluginId.default,".containers.SettingPage.editSettings.entry.title.description")},type:'select',name:'settings.mainField',customBootstrapClass:'col-md-4',selectOptions:['id'],didCheckErrors:false,validations:{}}],initialData:initialData,isLoading:isLoading,modifiedData:modifiedData,name:getName,onChange:handleChange,onConfirmReset:()=>{dispatch({type:'ON_RESET'});},onConfirmSubmit:handleConfirm,slug:slug||componentSlug,isEditSettings:true},/*#__PURE__*/_react.default.createElement("div",{className:"row"},/*#__PURE__*/_react.default.createElement(_LayoutTitle.default,{className:fieldsReorderClassName},/*#__PURE__*/_react.default.createElement("div",{style:{display:'flex',justifyContent:'space-between'}},/*#__PURE__*/_react.default.createElement("div",null,/*#__PURE__*/_react.default.createElement(_FormTitle.default,{title:"".concat(_pluginId.default,".global.displayedFields"),description:"".concat(_pluginId.default,".containers.SettingPage.editSettings.description")})),/*#__PURE__*/_react.default.createElement("div",{style:{marginTop:-6}},(0,_getComponents.default)('editSettingsView','left.links',plugins,currentEnvironment,slug,push,{componentSlug,type,modifiedData})))),type!=='components'&&/*#__PURE__*/_react.default.createElement(_LayoutTitle.default,{className:"col-4"},/*#__PURE__*/_react.default.createElement(_FormTitle.default,{title:"".concat(_pluginId.default,".containers.SettingPage.relations"),description:"".concat(_pluginId.default,".containers.SettingPage.editSettings.description")})),/*#__PURE__*/_react.default.createElement(_FieldsReorder.default,{className:fieldsReorderClassName}),type!=='components'&&/*#__PURE__*/_react.default.createElement(_SortableList.default,{addItem:name=>{dispatch({type:'ADD_RELATION',name});},buttonData:getEditRelationsRemaingFields(),moveItem:(dragIndex,hoverIndex)=>{dispatch({type:'MOVE_RELATION',dragIndex,hoverIndex});},removeItem:index=>{dispatch({type:'REMOVE_RELATION',index});}}))),/*#__PURE__*/_react.default.createElement(_PopupForm.default,{headerId:"".concat(_pluginId.default,".containers.EditSettingsView.modal-form.edit-field"),isOpen:isModalFormOpen,onClosed:()=>{dispatch({type:'UNSET_FIELD_TO_EDIT'});},onSubmit:handleSubmitMetaForm,onToggle:toggleModalForm,renderForm:renderForm,subHeaderContent:metaToEdit,type:(0,_lodash.get)(getAttributes,[metaToEdit,'type'],'')}));};EditSettingsView.defaultProps={slug:null};EditSettingsView.propTypes={currentEnvironment:_propTypes.default.string.isRequired,deleteLayout:_propTypes.default.func.isRequired,deleteLayouts:_propTypes.default.func.isRequired,componentsAndModelsMainPossibleMainFields:_propTypes.default.object.isRequired,history:_propTypes.default.shape({push:_propTypes.default.func}).isRequired,location:_propTypes.default.shape({search:_propTypes.default.string.isRequired}).isRequired,plugins:_propTypes.default.object.isRequired,slug:_propTypes.default.string};var _default=EditSettingsView;exports.default=_default;

/***/ }),

/***/ 2233:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  padding: 18px 30px 18px 30px;\n"]);_templateObject=function _templateObject(){return data;};return data;}const Container=_styledComponents.default.div(_templateObject());var _default=Container;exports.default=_default;

/***/ }),

/***/ 2239:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _pluginId=_interopRequireDefault(__webpack_require__(101));const getTrad=id=>"".concat(_pluginId.default,".").concat(id);var _default=getTrad;exports.default=_default;

/***/ }),

/***/ 2246:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  .btn-group button {\n    line-height: 28px;\n  }\n"]);_templateObject=function _templateObject(){return data;};return data;}const SortWrapper=_styledComponents.default.div(_templateObject());var _default=SortWrapper;exports.default=_default;

/***/ }),

/***/ 2261:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(2));var _reactFontawesome=__webpack_require__(32);var _Wrapper=_interopRequireDefault(__webpack_require__(2262));const DynamicComponentCard=({children,componentUid,friendlyName,icon,onClick:_onClick})=>{return/*#__PURE__*/_react.default.createElement(_Wrapper.default,{onClick:e=>{e.preventDefault();e.stopPropagation();_onClick(componentUid);}},/*#__PURE__*/_react.default.createElement("button",{className:"component-icon",type:"button"},/*#__PURE__*/_react.default.createElement(_reactFontawesome.FontAwesomeIcon,{icon:icon})),/*#__PURE__*/_react.default.createElement("div",{className:"component-uid"},/*#__PURE__*/_react.default.createElement("span",null,friendlyName)),children);};DynamicComponentCard.defaultProps={children:null,friendlyName:'',onClick:()=>{},icon:'smile'};DynamicComponentCard.propTypes={children:_propTypes.default.node,componentUid:_propTypes.default.string.isRequired,friendlyName:_propTypes.default.string,icon:_propTypes.default.string,onClick:_propTypes.default.func};var _default=DynamicComponentCard;exports.default=_default;

/***/ }),

/***/ 2262:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  position: relative;\n  height: 90px;\n  width: 139px !important;\n  margin-right: 10px;\n  padding: 18px 10px;\n  background-color: #ffffff;\n  color: #919bae;\n  text-align: center;\n  border-radius: 2px;\n  cursor: pointer;\n  border: 1px solid #ffffff;\n\n  button {\n    outline: 0;\n  }\n\n  .component-uid {\n    width: 119px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    color: #919bae;\n    font-weight: 500;\n    font-size: 13px;\n    line-height: normal;\n  }\n\n  .component-icon {\n    width: 35px;\n    height: 35px;\n    margin-bottom: 5px;\n    line-height: 35px;\n    align-self: center;\n    border-radius: 50%;\n    background-color: #e9eaeb;\n    color: #b4b6ba;\n    padding: 0;\n    i,\n    svg {\n      margin: auto;\n      display: block;\n    }\n  }\n\n  &:hover {\n    background-color: #e6f0fb;\n    color: #007eff;\n    border: 1px solid #aed4fb;\n\n    .component-icon {\n      background-color: #aed4fb;\n      color: #007eff;\n    }\n    .component-uid {\n      color: #007eff;\n    }\n  }\n"]);_templateObject=function _templateObject(){return data;};return data;}const Wrapper=_styledComponents.default.div(_templateObject());var _default=Wrapper;exports.default=_default;

/***/ }),

/***/ 2263:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(2));var _strapiHelperPlugin=__webpack_require__(8);var _reactIntl=__webpack_require__(17);var _lodash=__webpack_require__(10);var _core=__webpack_require__(21);const PopupForm=({headerId,isOpen,onClosed,onSubmit,onToggle,renderForm,subHeaderContent,type})=>{const getAttrType=()=>{if(type==='timestamp'){return'date';}if(['decimal','float','integer','biginter'].includes(type)){return'number';}return type;};return/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.Modal,{isOpen:isOpen,onClosed:onClosed,onToggle:onToggle},/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.HeaderModal,null,/*#__PURE__*/_react.default.createElement("section",null,/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.HeaderModalTitle,{style:{textTransform:'none'}},/*#__PURE__*/_react.default.createElement(_core.AttributeIcon,{type:getAttrType(),style:{margin:'auto 20px auto 0'}}),/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:headerId}))),/*#__PURE__*/_react.default.createElement("section",null,/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.HeaderModalTitle,null,/*#__PURE__*/_react.default.createElement("span",null,(0,_lodash.upperFirst)(subHeaderContent)),/*#__PURE__*/_react.default.createElement("hr",null)))),/*#__PURE__*/_react.default.createElement("form",{onSubmit:onSubmit},/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.ModalForm,null,/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.ModalBody,null,renderForm())),/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.ModalFooter,null,/*#__PURE__*/_react.default.createElement("section",null,/*#__PURE__*/_react.default.createElement(_core.Button,{onClick:onToggle,color:"cancel"},/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:"components.popUpWarning.button.cancel"})),/*#__PURE__*/_react.default.createElement(_core.Button,{type:"submit",color:"success"},/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:"form.button.done"}))))));};PopupForm.defaultProps={isOpen:false,onClosed:()=>{},onSubmit:()=>{},onToggle:()=>{},renderForm:()=>{},subHeaderContent:'',type:''};PopupForm.propTypes={headerId:_propTypes.default.string.isRequired,isOpen:_propTypes.default.bool,onClosed:_propTypes.default.func,onSubmit:_propTypes.default.func,onToggle:_propTypes.default.func,renderForm:_propTypes.default.func,subHeaderContent:_propTypes.default.string,type:_propTypes.default.string};var _default=PopupForm;exports.default=_default;

/***/ }),

/***/ 2264:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireWildcard=__webpack_require__(7);var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireWildcard(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(2));var _lodash=__webpack_require__(10);var _reactRouterDom=__webpack_require__(34);var _reactIntl=__webpack_require__(17);var _custom=__webpack_require__(62);var _strapiHelperPlugin=__webpack_require__(8);var _pluginId=_interopRequireDefault(__webpack_require__(101));var _Block=_interopRequireDefault(__webpack_require__(2265));var _Container=_interopRequireDefault(__webpack_require__(2233));var _SectionTitle=_interopRequireDefault(__webpack_require__(2267));var _Separator=_interopRequireDefault(__webpack_require__(2269));const SettingsViewWrapper=({children,history:{goBack},getListDisplayedFields,inputs,initialData,isEditSettings,isLoading,modifiedData,onChange,onConfirmReset,onConfirmSubmit,name})=>{const{emitEvent,formatMessage}=(0,_strapiHelperPlugin.useGlobalContext)();const[showWarningCancel,setWarningCancel]=(0,_react.useState)(false);const[showWarningSubmit,setWarningSubmit]=(0,_react.useState)(false);const getAttributes=(0,_react.useMemo)(()=>{return(0,_lodash.get)(modifiedData,['schema','attributes'],{});},[modifiedData]);const toggleWarningCancel=()=>setWarningCancel(prevState=>!prevState);const toggleWarningSubmit=()=>setWarningSubmit(prevState=>!prevState);const getPluginHeaderActions=()=>{return[{color:'cancel',onClick:toggleWarningCancel,label:formatMessage({id:"".concat(_pluginId.default,".popUpWarning.button.cancel")}),type:'button',disabled:(0,_lodash.isEqual)(modifiedData,initialData),style:{fontWeight:600,paddingLeft:15,paddingRight:15}},{color:'success',label:formatMessage({id:"".concat(_pluginId.default,".containers.Edit.submit")}),type:'submit',disabled:(0,_lodash.isEqual)(modifiedData,initialData),style:{minWidth:150,fontWeight:600}}];};const headerProps={actions:getPluginHeaderActions(),title:{label:formatMessage({id:"".concat(_pluginId.default,".components.SettingsViewWrapper.pluginHeader.title")},{name:(0,_lodash.upperFirst)(name)})},content:formatMessage({id:"".concat(_pluginId.default,".components.SettingsViewWrapper.pluginHeader.description.").concat(isEditSettings?'edit':'list',"-settings")})};const getSelectOptions=input=>{if(input.name==='settings.defaultSortBy'){return['id',...getListDisplayedFields().filter(name=>(0,_lodash.get)(getAttributes,[name,'type'],'')!=='media'&&name!=='id'&&(0,_lodash.get)(getAttributes,[name,'type'],'')!=='richtext')];}if(input.name==='settings.mainField'){const attributes=getAttributes;const options=Object.keys(attributes).filter(attr=>{const type=(0,_lodash.get)(attributes,[attr,'type'],'');return!['json','text','relation','component','boolean','date','media','richtext'].includes(type)&&!!type;});return options;}return input.options;};const handleSubmit=e=>{e.preventDefault();toggleWarningSubmit();emitEvent('willSaveContentTypeLayout');};if(isLoading){return/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.LoadingIndicatorPage,null);}return/*#__PURE__*/_react.default.createElement(_react.default.Fragment,null,/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.BackHeader,{onClick:goBack}),/*#__PURE__*/_react.default.createElement(_Container.default,{className:"container-fluid"},/*#__PURE__*/_react.default.createElement("form",{onSubmit:handleSubmit},/*#__PURE__*/_react.default.createElement(_custom.Header,headerProps),/*#__PURE__*/_react.default.createElement("div",{className:"row",style:{paddingTop:'3px'}},/*#__PURE__*/_react.default.createElement(_Block.default,{style:{marginBottom:'13px',paddingBottom:'30px',paddingTop:'24px'}},/*#__PURE__*/_react.default.createElement(_SectionTitle.default,{isSettings:true}),/*#__PURE__*/_react.default.createElement("div",{className:"row"},inputs.map(input=>{return/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{key:input.name,id:input.label.id},label=>/*#__PURE__*/_react.default.createElement("div",{className:input.customBootstrapClass},/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:(0,_lodash.get)(input,'description.id','app.utils.defaultMessage')},description=>/*#__PURE__*/_react.default.createElement(_custom.Inputs,(0,_extends2.default)({},input,{description:description,label:label===' '?null:label,onChange:onChange,options:getSelectOptions(input),value:(0,_lodash.get)(modifiedData,input.name,'')})))));}),/*#__PURE__*/_react.default.createElement("div",{className:"col-12"},/*#__PURE__*/_react.default.createElement(_Separator.default,{style:{marginBottom:20}}))),/*#__PURE__*/_react.default.createElement(_SectionTitle.default,null),children)),/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.PopUpWarning,{isOpen:showWarningCancel,toggleModal:toggleWarningCancel,content:{title:"".concat(_pluginId.default,".popUpWarning.title"),message:"".concat(_pluginId.default,".popUpWarning.warning.cancelAllSettings"),cancel:"".concat(_pluginId.default,".popUpWarning.button.cancel"),confirm:"".concat(_pluginId.default,".popUpWarning.button.confirm")},popUpWarningType:"danger",onConfirm:()=>{onConfirmReset();toggleWarningCancel();}}),/*#__PURE__*/_react.default.createElement(_strapiHelperPlugin.PopUpWarning,{isOpen:showWarningSubmit,toggleModal:toggleWarningSubmit,content:{title:"".concat(_pluginId.default,".popUpWarning.title"),message:"".concat(_pluginId.default,".popUpWarning.warning.updateAllSettings"),cancel:"".concat(_pluginId.default,".popUpWarning.button.cancel"),confirm:"".concat(_pluginId.default,".popUpWarning.button.confirm")},popUpWarningType:"danger",onConfirm:async()=>{await onConfirmSubmit();toggleWarningSubmit();}}))));};SettingsViewWrapper.defaultProps={getListDisplayedFields:()=>[],inputs:[],initialData:{},isEditSettings:false,modifiedData:{},name:'',onConfirmReset:()=>{},onConfirmSubmit:async()=>{},onSubmit:()=>{},pluginHeaderProps:{actions:[],description:{id:'app.utils.defaultMessage'},title:{id:'app.utils.defaultMessage',values:{}}}};SettingsViewWrapper.propTypes={children:_propTypes.default.node.isRequired,getListDisplayedFields:_propTypes.default.func,history:_propTypes.default.shape({goBack:_propTypes.default.func.isRequired}).isRequired,initialData:_propTypes.default.object,inputs:_propTypes.default.array,isEditSettings:_propTypes.default.bool,isLoading:_propTypes.default.bool.isRequired,modifiedData:_propTypes.default.object,name:_propTypes.default.string,onChange:_propTypes.default.func.isRequired,onConfirmReset:_propTypes.default.func,onConfirmSubmit:_propTypes.default.func,onSubmit:_propTypes.default.func,pluginHeaderProps:_propTypes.default.shape({actions:_propTypes.default.array,description:_propTypes.default.shape({id:_propTypes.default.string}),title:_propTypes.default.shape({id:_propTypes.default.string,values:_propTypes.default.object})})};var _default=(0,_reactRouterDom.withRouter)(SettingsViewWrapper);exports.default=_default;

/***/ }),

/***/ 2265:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(2));var _reactIntl=__webpack_require__(17);var _components=__webpack_require__(2266);/**
 *
 * Block
 */const renderMsg=msg=>/*#__PURE__*/_react.default.createElement("p",null,msg);const Block=({children,description,style,title})=>/*#__PURE__*/_react.default.createElement("div",{className:"col-md-12"},/*#__PURE__*/_react.default.createElement(_components.Wrapper,{style:style},/*#__PURE__*/_react.default.createElement(_components.Sub,null,!!title&&/*#__PURE__*/_react.default.createElement("p",null,/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:title})),!!description&&/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:description},renderMsg)),children));Block.defaultProps={children:null,description:null,style:{},title:null};Block.propTypes={children:_propTypes.default.any,description:_propTypes.default.string,style:_propTypes.default.object,title:_propTypes.default.string};var _default=/*#__PURE__*/(0,_react.memo)(Block);exports.default=_default;

/***/ }),

/***/ 2266:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.Sub=exports.Wrapper=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject2(){const data=(0,_taggedTemplateLiteral2.default)(["\n  padding-top: 0px;\n  line-height: 18px;\n  > p:first-child {\n    margin-bottom: 1px;\n    font-weight: 700;\n    color: #333740;\n    font-size: 1.8rem;\n  }\n  > p {\n    color: #787e8f;\n    font-size: 13px;\n  }\n"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  margin-bottom: 35px;\n  background: #ffffff;\n  padding: 22px 28px 18px;\n  padding-bottom: 13px;\n  border-radius: 2px;\n  box-shadow: 0 2px 4px #e3e9f3;\n  -webkit-font-smoothing: antialiased;\n"]);_templateObject=function _templateObject(){return data;};return data;}const Wrapper=_styledComponents.default.div(_templateObject());exports.Wrapper=Wrapper;const Sub=_styledComponents.default.div(_templateObject2());exports.Sub=Sub;

/***/ }),

/***/ 2267:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(2));var _reactIntl=__webpack_require__(17);var _pluginId=_interopRequireDefault(__webpack_require__(101));var _Title=_interopRequireDefault(__webpack_require__(2268));const SectionTitle=({isSettings})=>{const suffix=isSettings?'settings':'view';const msgId="".concat(_pluginId.default,".containers.SettingPage.").concat(suffix);return/*#__PURE__*/_react.default.createElement("div",{style:{marginBottom:'18px'}},/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:msgId},msg=>/*#__PURE__*/_react.default.createElement(_Title.default,null,msg)));};SectionTitle.propTypes={isSettings:_propTypes.default.bool};SectionTitle.defaultProps={isSettings:false};var _default=/*#__PURE__*/(0,_react.memo)(SectionTitle);exports.default=_default;

/***/ }),

/***/ 2268:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  color: #787e8f;\n  font-size: 11px;\n  font-weight: 700;\n  letter-spacing: 0.77px;\n  text-transform: uppercase;\n"]);_templateObject=function _templateObject(){return data;};return data;}const Title=_styledComponents.default.div(_templateObject());var _default=Title;exports.default=_default;

/***/ }),

/***/ 2269:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  margin-top: 17px;\n  margin-bottom: 24px;\n  border-top: 1px solid #f6f6f6;\n"]);_templateObject=function _templateObject(){return data;};return data;}const Separator=_styledComponents.default.div(_templateObject());var _default=Separator;exports.default=_default;

/***/ }),

/***/ 2270:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(6));var _react=_interopRequireDefault(__webpack_require__(1));var _lodash=__webpack_require__(10);var _pluginId=_interopRequireDefault(__webpack_require__(101));/**
 * Retrieve external links from injected components
 * @type {Array} List of external links to display
 */const getInjectedComponents=(container,area,plugins,currentEnvironment,slug,push,...rest)=>{const componentsToInject=Object.keys(plugins).reduce((acc,current)=>{// Retrieve injected compos from plugin
const currentPlugin=plugins[current];const injectedComponents=(0,_lodash.get)(currentPlugin,'injectedComponents',[]);const compos=injectedComponents.filter(compo=>{return compo.plugin==="".concat(_pluginId.default,".").concat(container)&&compo.area===area;}).map(compo=>{const Component=compo.component;return/*#__PURE__*/_react.default.createElement(Component,(0,_extends2.default)({viewProps:rest,currentEnvironment:currentEnvironment,getModelName:()=>slug,push:push},compo.props,{key:compo.key}));});return[...acc,...compos];},[]);return componentsToInject;};var _default=getInjectedComponents;exports.default=_default;

/***/ }),

/***/ 2289:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _reactIntl=__webpack_require__(17);var _propTypes=_interopRequireDefault(__webpack_require__(2));var _icons=__webpack_require__(72);var _reactstrap=__webpack_require__(55);var _getTrad=_interopRequireDefault(__webpack_require__(2239));var _components=__webpack_require__(2364);function Add({data,isRelation,onClick:_onClick,pStyle,style}){const[isOpen,setIsOpen]=(0,_react.useState)(false);return/*#__PURE__*/_react.default.createElement(_components.Wrapper,{isOpen:isOpen,notAllowed:data.length===0,style:style},/*#__PURE__*/_react.default.createElement(_reactstrap.ButtonDropdown,{isOpen:isOpen,toggle:()=>{if(data.length>0){setIsOpen(prevState=>!prevState);}}},/*#__PURE__*/_react.default.createElement(_reactstrap.DropdownToggle,null,/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:(0,_getTrad.default)("containers.SettingPage.".concat(isRelation?'add.relational-field':'add.field'))},msg=>/*#__PURE__*/_react.default.createElement("p",{style:pStyle},/*#__PURE__*/_react.default.createElement(_icons.Plus,{fill:"#007eff",height:"11px",width:"11px"}),msg))),/*#__PURE__*/_react.default.createElement(_reactstrap.DropdownMenu,null,data.map(item=>/*#__PURE__*/_react.default.createElement(_reactstrap.DropdownItem,{key:item,onClick:()=>{_onClick(item);}},item)))));}Add.defaultProps={data:[],isRelation:false,onClick:()=>{},pStyle:{},style:{}};Add.propTypes={data:_propTypes.default.array,isRelation:_propTypes.default.bool,onClick:_propTypes.default.func,pStyle:_propTypes.default.object,style:_propTypes.default.object};var _default=/*#__PURE__*/(0,_react.memo)(Add);exports.default=_default;

/***/ }),

/***/ 2290:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _lodash=__webpack_require__(10);var _propTypes=_interopRequireDefault(__webpack_require__(2));var _DraggedField=_interopRequireDefault(__webpack_require__(761));var _PreviewCarret=_interopRequireDefault(__webpack_require__(764));var _Carret=_interopRequireDefault(__webpack_require__(2367));var _DynamicZoneWrapper=_interopRequireDefault(__webpack_require__(2368));var _Wrapper=_interopRequireDefault(__webpack_require__(2369));var _DynamicComponent=_interopRequireDefault(__webpack_require__(2370));/* eslint-disable react/no-array-index-key */const DraggedFieldWithPreview=/*#__PURE__*/(0,_react.forwardRef)(({goTo,componentUid,componentLayouts,dynamicZoneComponents,isDragging,label,name,onClickEdit,onClickRemove,selectedItem,showLeftCarret,showRightCarret,size,style,type},refs)=>{const isHidden=name==='_TEMP_';const[dragStart,setDragStart]=(0,_react.useState)(false);const[isOverDynamicZone,setIsOverDynamicZone]=(0,_react.useState)(false);const opacity=isDragging?0.2:1;const isFullSize=size===12;const display=isFullSize&&dragStart?'none':'';const width=isFullSize&&dragStart?0:'100%';const higherFields=['json','text','file','media','component','richtext','dynamiczone'];const withLongerHeight=higherFields.includes(type)&&!dragStart;const getCompoInfos=uid=>(0,_lodash.get)(componentLayouts,[uid,'schema','info'],{name:'',icon:''});const componentData=(0,_lodash.get)(componentLayouts,[componentUid],{});const componentLayout=(0,_lodash.get)(componentData,['layouts','edit'],[]);const getWrapperWitdh=colNum=>"".concat(1/12*colNum*100,"%");return/*#__PURE__*/_react.default.createElement("div",{style:{width:getWrapperWitdh(size)},onDrag:()=>{if(isFullSize&&!dragStart){setDragStart(true);}},onDragEnd:()=>{if(isFullSize){setDragStart(false);}}},/*#__PURE__*/_react.default.createElement(_Wrapper.default,{ref:refs.dropRef,withLongerHeight:withLongerHeight,style:style},dragStart&&isFullSize&&/*#__PURE__*/_react.default.createElement(_PreviewCarret.default,{style:{marginRight:'-10px'}}),/*#__PURE__*/_react.default.createElement(_react.default.Fragment,null,showLeftCarret&&/*#__PURE__*/_react.default.createElement(_Carret.default,null),/*#__PURE__*/_react.default.createElement("div",{className:"sub",style:{width,opacity}},/*#__PURE__*/_react.default.createElement(_DraggedField.default,{goTo:goTo,componentUid:componentUid,isHidden:isHidden,isOverDynamicZone:isOverDynamicZone,label:label,name:name,onClick:onClickEdit,onRemove:onClickRemove,ref:refs.dragRef,selectedItem:selectedItem,style:{display,marginRight:0,paddingRight:0},type:type,withLongerHeight:withLongerHeight},type==='component'&&componentLayout.map((row,i)=>{const marginBottom=i===componentLayout.length-1?'29px':'';const marginTop=i===0?'5px':'';return/*#__PURE__*/_react.default.createElement("div",{style:{display:'flex',marginBottom,marginTop},key:i},row.map(field=>{const fieldType=(0,_lodash.get)(componentData,['schema','attributes',field.name,'type'],'');const label=(0,_lodash.get)(componentData,['metadatas',field.name,'edit','label'],'');return/*#__PURE__*/_react.default.createElement("div",{key:field.name,style:{width:getWrapperWitdh(field.size),marginBottom:'6px'}},/*#__PURE__*/_react.default.createElement(_DraggedField.default,{label:label,name:field.name,isSub:true,withLongerHeight:higherFields.includes(fieldType)}));}));}),type==='dynamiczone'&&/*#__PURE__*/_react.default.createElement(_DynamicZoneWrapper.default,null,dynamicZoneComponents.map(compo=>{const{name,icon}=getCompoInfos(compo);return/*#__PURE__*/_react.default.createElement(_DynamicComponent.default,{key:compo,componentUid:compo,friendlyName:name,icon:icon,setIsOverDynamicZone:setIsOverDynamicZone});})))),showRightCarret&&/*#__PURE__*/_react.default.createElement(_Carret.default,{right:true}))));});DraggedFieldWithPreview.defaultProps={goTo:()=>{},componentLayouts:{},componentUid:null,dynamicZoneComponents:[],isDragging:false,label:'',onClickEdit:()=>{},onClickRemove:()=>{},selectedItem:'',showLeftCarret:false,showRightCarret:false,size:1,style:{},type:'string'};DraggedFieldWithPreview.propTypes={goTo:_propTypes.default.func,componentLayouts:_propTypes.default.object,componentUid:_propTypes.default.string,dynamicZoneComponents:_propTypes.default.array,isDragging:_propTypes.default.bool,label:_propTypes.default.string,name:_propTypes.default.string.isRequired,onClickEdit:_propTypes.default.func,onClickRemove:_propTypes.default.func,selectedItem:_propTypes.default.string,showLeftCarret:_propTypes.default.bool,showRightCarret:_propTypes.default.bool,size:_propTypes.default.number,style:_propTypes.default.object,type:_propTypes.default.string};DraggedFieldWithPreview.displayName='DraggedFieldWithPreview';var _default=DraggedFieldWithPreview;exports.default=_default;

/***/ }),

/***/ 2291:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});exports.unformatLayout=exports.getRowSize=exports.getInputSize=exports.getFieldType=exports.formatLayout=exports.createLayout=void 0;const getRowSize=arr=>arr.reduce((sum,value)=>sum+value.size,0);exports.getRowSize=getRowSize;const createLayout=arr=>{return arr.reduce((acc,current,index)=>{const row={rowId:index,rowContent:current};return acc.concat(row);},[]);};exports.createLayout=createLayout;const formatLayout=arr=>{return arr.reduce((acc,current)=>{let toPush=[];const currentRow=current.rowContent.reduce((acc2,curr)=>{const acc2Size=getRowSize(acc2);if(curr.name==='_TEMP_'){return acc2;}if(acc2Size+curr.size<=12){acc2.push(curr);}else{toPush.push(curr);}return acc2;},[]);const rowId=acc.length===0?0:Math.max.apply(Math,acc.map(o=>o.rowId))+1;const currentRowSize=getRowSize(currentRow);if(currentRowSize<12){currentRow.push({name:'_TEMP_',size:12-currentRowSize});}acc.push({rowId,rowContent:currentRow});if(toPush.length>0){const toPushSize=getRowSize(toPush);if(toPushSize<12){toPush.push({name:'_TEMP_',size:12-toPushSize});}acc.push({rowId:rowId+1,rowContent:toPush});toPush=[];}return acc;},[]).filter(row=>row.rowContent.length>0).filter(row=>{if(row.rowContent.length===1){return row.rowContent[0].name!=='_TEMP_';}return true;});};exports.formatLayout=formatLayout;const unformatLayout=arr=>{return arr.reduce((acc,current)=>{const currentRow=current.rowContent.filter(content=>content.name!=='_TEMP_');return acc.concat([currentRow]);},[]);};exports.unformatLayout=unformatLayout;const getInputSize=type=>{switch(type){case'boolean':case'date':case'integer':case'float':case'biginteger':case'decimal':case'time':return 4;case'json':case'component':case'richtext':case'dynamiczone':return 12;default:return 6;}};exports.getInputSize=getInputSize;const getFieldType=(state,name)=>state.getIn(['modifiedData','schema','attributes',name,'type']);exports.getFieldType=getFieldType;

/***/ }),

/***/ 2363:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(2));var _lodash=__webpack_require__(10);var _useLayoutDnd=_interopRequireDefault(__webpack_require__(757));var _AddDropdown=_interopRequireDefault(__webpack_require__(2289));var _SortWrapper=_interopRequireDefault(__webpack_require__(2246));var _components=_interopRequireDefault(__webpack_require__(2365));var _Item=_interopRequireDefault(__webpack_require__(2366));const FieldsReorder=({className})=>{const{attributes,buttonData,layout,moveItem,moveRow,onAddData,removeField}=(0,_useLayoutDnd.default)();const getComponent=(0,_react.useCallback)(attributeName=>{return(0,_lodash.get)(attributes,[attributeName,'component'],'');},[attributes]);const getType=(0,_react.useCallback)(attributeName=>{const attribute=(0,_lodash.get)(attributes,[attributeName],{});return attribute.type;},[attributes]);const getDynamicZoneComponents=(0,_react.useCallback)(attributeName=>{const attribute=(0,_lodash.get)(attributes,[attributeName],{});return attribute.components||[];},[attributes]);return/*#__PURE__*/_react.default.createElement("div",{className:className},/*#__PURE__*/_react.default.createElement(_SortWrapper.default,{style:{marginTop:7,paddingTop:11,paddingLeft:5,paddingRight:5,border:'1px dashed #e3e9f3'}},layout.map((row,rowIndex)=>{return/*#__PURE__*/_react.default.createElement(_components.default,{key:row.rowId,style:{}},row.rowContent.map((rowContent,index)=>{const{name,size}=rowContent;return/*#__PURE__*/_react.default.createElement(_Item.default,{componentUid:getComponent(name),dynamicZoneComponents:getDynamicZoneComponents(name),itemIndex:index,key:name,moveRow:moveRow,moveItem:moveItem,name:name,removeField:removeField,rowIndex:rowIndex,size:size,type:getType(name)});}));}),/*#__PURE__*/_react.default.createElement(_components.default,{style:{marginBottom:10}},/*#__PURE__*/_react.default.createElement(_AddDropdown.default,{data:buttonData,onClick:onAddData,style:{width:'100%',margin:'0 5px'}}))));};FieldsReorder.defaultProps={className:'col-8'};FieldsReorder.propTypes={className:_propTypes.default.string};var _default=/*#__PURE__*/(0,_react.memo)(FieldsReorder);exports.default=_default;

/***/ }),

/***/ 2364:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireWildcard=__webpack_require__(7);var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.Wrapper=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireWildcard(__webpack_require__(3));function _templateObject3(){const data=(0,_taggedTemplateLiteral2.default)(["\n        > div {\n          > button {\n            cursor: not-allowed !important;\n          }\n        }\n      "]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){const data=(0,_taggedTemplateLiteral2.default)(["\n        > div {\n          background-color: #e6f0fb !important;\n          border-color: #aed4fb !important;\n        }\n      "]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  margin-left: 29px;\n  > div {\n    height: 30px;\n    width: 100%;\n    justify-content: space-between;\n    background: #ffffff;\n    color: #333740;\n    border-radius: 2px;\n    border: solid 1px #007eff;\n\n    > button {\n      cursor: pointer;\n      padding-left: 10px !important;\n      line-height: 30px;\n      width: 100%;\n      color: #333740;\n      text-align: left;\n      background-color: #ffffff;\n      border: none;\n      font-size: 13px;\n      font-weight: 500;\n      &:focus,\n      &:active,\n      &:hover,\n      &:visited {\n        background-color: transparent !important;\n        box-shadow: none;\n        color: #333740;\n      }\n      > p {\n        position: relative;\n        height: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: center;\n        margin-bottom: 0;\n        margin-top: -1px;\n        color: #007eff !important;\n        font-size: 13px !important;\n        svg {\n          fill: #007eff;\n          margin-right: 7px;\n          vertical-align: initial;\n        }\n      }\n    }\n    > div {\n      max-height: 180px;\n      min-width: calc(100% + 2px);\n      margin-left: -1px;\n      margin-top: -1px;\n      padding: 0;\n      border-top-left-radius: 0 !important;\n      border-top-right-radius: 0;\n      border-color: #e3e9f3 !important;\n      border-top-color: #aed4fb !important;\n      box-shadow: 0 2px 3px rgba(227, 233, 245, 0.5);\n\n      overflow: scroll;\n\n      button {\n        height: 30px;\n        padding-left: 10px !important;\n        line-height: 26px;\n        cursor: pointer;\n        font-size: 13px !important;\n        &:focus,\n        &:active,\n        &:hover,\n        &:hover {\n          background-color: #fafafb !important;\n          color: #333740;\n          outline: 0;\n        }\n        div {\n          margin: 0;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      }\n    }\n  }\n\n  ","\n\n  ","\n"]);_templateObject=function _templateObject(){return data;};return data;}/* eslint-disable */const Wrapper=_styledComponents.default.div(_templateObject(),({isOpen})=>{if(isOpen){return(0,_styledComponents.css)(_templateObject2());}},({notAllowed})=>{if(notAllowed){return(0,_styledComponents.css)(_templateObject3());}});exports.Wrapper=Wrapper;

/***/ }),

/***/ 2365:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  display: flex;\n  margin-bottom: 6px;\n"]);_templateObject=function _templateObject(){return data;};return data;}const Wrapper=_styledComponents.default.div(_templateObject());var _default=Wrapper;exports.default=_default;

/***/ }),

/***/ 2366:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _reactDnd=__webpack_require__(123);var _reactDndHtml5Backend=__webpack_require__(279);var _propTypes=_interopRequireDefault(__webpack_require__(2));var _lodash=__webpack_require__(10);var _useLayoutDnd=_interopRequireDefault(__webpack_require__(757));var _DraggedFieldWithPreview=_interopRequireDefault(__webpack_require__(2290));var _ItemTypes=_interopRequireDefault(__webpack_require__(756));const Item=({componentUid,dynamicZoneComponents,itemIndex,moveItem,moveRow,name,removeField,rowIndex,size,type})=>{const{goTo,componentLayouts,metadatas,setEditFieldToSelect,selectedItemName,setIsDraggingSibling}=(0,_useLayoutDnd.default)();const dragRef=(0,_react.useRef)(null);const dropRef=(0,_react.useRef)(null);const[{clientOffset,isOver},drop]=(0,_reactDnd.useDrop)({// Source code from http://react-dnd.github.io/react-dnd/examples/sortable/simple
// And also from https://codesandbox.io/s/6v7l7z68jk
accept:_ItemTypes.default.EDIT_FIELD,hover(item,monitor){if(!dropRef.current){return;}// We use the hover only to reorder full size items
if(item.size!==12){return;}const dragIndex=monitor.getItem().itemIndex;const hoverIndex=itemIndex;const dragRow=monitor.getItem().rowIndex;const targetRow=rowIndex;// Don't replace item with themselves
if(dragIndex===hoverIndex&&dragRow===targetRow){return;}// Determine rectangle on screen
const hoverBoundingRect=dropRef.current.getBoundingClientRect();// Get vertical middle
const hoverMiddleY=(hoverBoundingRect.bottom-hoverBoundingRect.top)/2;// Determine mouse position
const clientOffset=monitor.getClientOffset();// Get pixels to the top
const hoverClientY=clientOffset.y-hoverBoundingRect.top;// Only perform the move when the mouse has crossed half of the items height
// When dragging downwards, only move when the cursor is below 50%
// When dragging upwards, only move when the cursor is above 50%
// Dragging downwards
if(dragRow<targetRow&&hoverClientY<hoverMiddleY){return;}// Dragging upwards
if(dragRow>targetRow&&hoverClientY>hoverMiddleY){return;}moveRow(dragRow,targetRow);item.rowIndex=targetRow;item.itemIndex=hoverIndex;},drop(item,monitor){if(!dropRef.current){return;}const dragIndex=monitor.getItem().itemIndex;const hoverIndex=itemIndex;const dragRow=monitor.getItem().rowIndex;const targetRow=rowIndex;// Don't reorder on drop for full size elements since it is already done in the hover
if(item.size===12){return;}// Don't replace item with themselves
if(dragIndex===hoverIndex&&dragRow===targetRow){return;}// Determine rectangle on screen
const hoverBoundingRect=dropRef.current.getBoundingClientRect();// Scroll window if mouse near vertical edge(100px)
// Horizontal Check --
if(Math.abs(monitor.getClientOffset().x-hoverBoundingRect.left)>hoverBoundingRect.width/1.8){moveItem(dragIndex,hoverIndex+1,dragRow,targetRow);item.itemIndex=hoverIndex+1;item.rowIndex=targetRow;return;}// Vertical Check |
// Time to actually perform the action
moveItem(dragIndex,hoverIndex,dragRow,targetRow);// Note: we're mutating the monitor item here!
// Generally it's better to avoid mutations,
// but it's good here for the sake of performance
// to avoid expensive index searches.
item.itemIndex=hoverIndex;item.rowIndex=targetRow;},collect:monitor=>({canDrop:monitor.canDrop(),clientOffset:monitor.getClientOffset(),isOver:monitor.isOver(),isOverCurrent:monitor.isOver({shallow:true}),itemType:monitor.getItemType()})});const[{isDragging,getItem},drag,preview]=(0,_reactDnd.useDrag)({begin:()=>{setIsDraggingSibling(true);},canDrag(){// Each row of the layout has a max size of 12 (based on bootstrap grid system)
// So in order to offer a better drop zone we add the _TEMP_ div to complete the remaining substract (12 - existing)
// Those divs cannot be dragged
// If we wanted to offer the ability to create new lines in the layout (which will come later)
// We will need to add a 12 size _TEMP_ div to offer a drop target between each existing row.
return name!=='_TEMP_';},collect:monitor=>({isDragging:monitor.isDragging(),getItem:monitor.getItem()}),end:()=>{setIsDraggingSibling(false);},item:{type:_ItemTypes.default.EDIT_FIELD,itemIndex,rowIndex,name,size}});// Remove the default preview when the item is being dragged
// The preview is handled by the DragLayer
(0,_react.useEffect)(()=>{preview((0,_reactDndHtml5Backend.getEmptyImage)(),{captureDraggingState:true});},[preview]);// Create the refs
// We need 1 for the drop target
// 1 for the drag target
const refs={dragRef:drag(dragRef),dropRef:drop(dropRef)};let showLeftCarret=false;let showRightCarret=false;if(dropRef.current&&clientOffset){const hoverBoundingRect=dropRef.current.getBoundingClientRect();showLeftCarret=isOver&&getItem.size!==12&&Math.abs(clientOffset.x-hoverBoundingRect.left)<hoverBoundingRect.width/2;showRightCarret=isOver&&getItem.size!==12&&Math.abs(clientOffset.x-hoverBoundingRect.left)>hoverBoundingRect.width/2;if(name==='_TEMP_'){showLeftCarret=isOver&&getItem.size!==12;showRightCarret=false;}}return/*#__PURE__*/_react.default.createElement(_DraggedFieldWithPreview.default,{goTo:goTo,componentUid:componentUid,componentLayouts:componentLayouts,dynamicZoneComponents:dynamicZoneComponents,isDragging:isDragging,label:(0,_lodash.get)(metadatas,[name,'edit','label'],''),name:name,onClickEdit:setEditFieldToSelect,onClickRemove:e=>{e.stopPropagation();removeField(rowIndex,itemIndex);},selectedItem:selectedItemName,showLeftCarret:showLeftCarret,showRightCarret:showRightCarret,size:size,type:type,ref:refs});};Item.defaultProps={componentUid:'',dynamicZoneComponents:[],type:'string'};Item.propTypes={componentUid:_propTypes.default.string,dynamicZoneComponents:_propTypes.default.array,itemIndex:_propTypes.default.number.isRequired,moveItem:_propTypes.default.func.isRequired,moveRow:_propTypes.default.func.isRequired,name:_propTypes.default.string.isRequired,removeField:_propTypes.default.func.isRequired,rowIndex:_propTypes.default.number.isRequired,size:_propTypes.default.number.isRequired,type:_propTypes.default.string};var _default=Item;exports.default=_default;

/***/ }),

/***/ 2367:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  position: absolute;\n  ","\n  height: 100%;\n  width: 2px;\n  margin-right: 3px;\n  border-radius: 2px;\n  background: #007eff;\n"]);_templateObject=function _templateObject(){return data;};return data;}/* eslint-disable indent */const Carret=_styledComponents.default.div(_templateObject(),({right})=>{if(right){return"\n      right: -4px;\n    ";}return"\n    left: -1px;\n  ";});var _default=Carret;exports.default=_default;

/***/ }),

/***/ 2368:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  display: flex;\n  margin: 5px 0 0px 0;\n  overflow: auto;\n  height: 119px;\n"]);_templateObject=function _templateObject(){return data;};return data;}const DynamicZoneWrapper=_styledComponents.default.div(_templateObject());var _default=DynamicZoneWrapper;exports.default=_default;

/***/ }),

/***/ 2369:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));var _propTypes=_interopRequireDefault(__webpack_require__(2));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  display: flex;\n  position: relative;\n  min-height: ",";\n\n  .sub {\n    width: 100%;\n    padding: 0 5px;\n  }\n"]);_templateObject=function _templateObject(){return data;};return data;}const Wrapper=_styledComponents.default.div(_templateObject(),({withLongerHeight})=>withLongerHeight?'102px':'30px');Wrapper.defaultProps={withLongerHeight:false};Wrapper.propTypes={withLongerHeight:_propTypes.default.bool};var _default=Wrapper;exports.default=_default;

/***/ }),

/***/ 2370:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _reactRouterDom=__webpack_require__(34);var _propTypes=_interopRequireDefault(__webpack_require__(2));var _pluginId=_interopRequireDefault(__webpack_require__(101));var _DynamicComponentCard=_interopRequireDefault(__webpack_require__(2261));var _Tooltip=_interopRequireDefault(__webpack_require__(2371));const DynamicComponent=({componentUid,friendlyName,icon,setIsOverDynamicZone})=>{const[state,setState]=(0,_react.useState)(false);const{push}=(0,_reactRouterDom.useHistory)();const handleMouseEvent=()=>{setIsOverDynamicZone(v=>!v);setState(v=>!v);};return/*#__PURE__*/_react.default.createElement(_DynamicComponentCard.default,{componentUid:componentUid,friendlyName:friendlyName,icon:icon,isOver:state,onClick:()=>{push("/plugins/".concat(_pluginId.default,"/ctm-configurations/edit-settings/components/").concat(componentUid,"/"));},onMouseEvent:handleMouseEvent,tradId:"components.DraggableAttr.edit"},/*#__PURE__*/_react.default.createElement(_Tooltip.default,{isOver:state},componentUid));};DynamicComponent.defaultProps={friendlyName:'',icon:'smile'};DynamicComponent.propTypes={componentUid:_propTypes.default.string.isRequired,friendlyName:_propTypes.default.string,icon:_propTypes.default.string,setIsOverDynamicZone:_propTypes.default.func.isRequired};var _default=DynamicComponent;exports.default=_default;

/***/ }),

/***/ 2371:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  position: absolute;\n  bottom: -10px;\n  left: 105px;\n  visibility: ",";\n  line-height: 20px;\n  height: 20px;\n  padding: 0 10px;\n  background-color: #000000;\n  font-size: 12px;\n  color: #fff;\n  opacity: 0.5;\n  border: 1px solid #e3e9f3;\n  z-index: 99;\n"]);_templateObject=function _templateObject(){return data;};return data;}const Tooltip=_styledComponents.default.div(_templateObject(),({isOver})=>isOver?'visible':'hidden');var _default=Tooltip;exports.default=_default;

/***/ }),

/***/ 2372:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(2));var _reactIntl=__webpack_require__(17);const FormTitle=({description,title})=>/*#__PURE__*/_react.default.createElement(_react.default.Fragment,null,!!title&&/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:title}),!!description&&/*#__PURE__*/_react.default.createElement(_reactIntl.FormattedMessage,{id:description},msg=>/*#__PURE__*/_react.default.createElement("p",null,msg)));FormTitle.propTypes={description:_propTypes.default.string,title:_propTypes.default.string};FormTitle.defaultProps={description:null,title:null};var _default=/*#__PURE__*/(0,_react.memo)(FormTitle);exports.default=_default;

/***/ }),

/***/ 2373:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(4));var _styledComponents=_interopRequireDefault(__webpack_require__(3));function _templateObject(){const data=(0,_taggedTemplateLiteral2.default)(["\n  color: #333740;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 18px;\n\n  p {\n    margin-top: 2px;\n    margin-bottom: 13px;\n    color: #9ea7b8;\n    font-size: 12px;\n    font-weight: 400;\n    line-height: normal;\n  }\n"]);_templateObject=function _templateObject(){return data;};return data;}const LayoutTitle=_styledComponents.default.div(_templateObject());var _default=LayoutTitle;exports.default=_default;

/***/ }),

/***/ 2374:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(2));var _useLayoutDnd=_interopRequireDefault(__webpack_require__(757));var _AddDropdown=_interopRequireDefault(__webpack_require__(2289));var _SortWrapper=_interopRequireDefault(__webpack_require__(2246));var _Item=_interopRequireDefault(__webpack_require__(2375));const SortableList=({addItem,buttonData,moveItem,removeItem})=>{const{relationsLayout}=(0,_useLayoutDnd.default)();return/*#__PURE__*/_react.default.createElement("div",{className:"col-4"},/*#__PURE__*/_react.default.createElement(_SortWrapper.default,{style:{marginTop:7,paddingTop:11,paddingLeft:5,paddingRight:5,border:'1px dashed #e3e9f3'}},relationsLayout.map((relationName,index)=>{return/*#__PURE__*/_react.default.createElement(_Item.default,{index:index,key:relationName,move:moveItem,name:relationName,removeItem:removeItem});}),/*#__PURE__*/_react.default.createElement(_AddDropdown.default,{data:buttonData,isRelation:true,onClick:addItem,style:{marginLeft:10,marginRight:10,marginBottom:13}})));};SortableList.defaultProps={buttonData:[]};SortableList.propTypes={addItem:_propTypes.default.func.isRequired,buttonData:_propTypes.default.array,moveItem:_propTypes.default.func.isRequired,removeItem:_propTypes.default.func.isRequired};var _default=/*#__PURE__*/(0,_react.memo)(SortableList);exports.default=_default;

/***/ }),

/***/ 2375:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);var _interopRequireWildcard=__webpack_require__(7);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _reactDnd=__webpack_require__(123);var _reactDndHtml5Backend=__webpack_require__(279);var _propTypes=_interopRequireDefault(__webpack_require__(2));var _lodash=__webpack_require__(10);var _useLayoutDnd=_interopRequireDefault(__webpack_require__(757));var _DraggedFieldWithPreview=_interopRequireDefault(__webpack_require__(2290));var _ItemTypes=_interopRequireDefault(__webpack_require__(756));const Item=({index,move,name,removeItem})=>{const{goTo,metadatas,selectedItemName,setEditFieldToSelect,setIsDraggingSibling}=(0,_useLayoutDnd.default)();const dragRef=(0,_react.useRef)(null);const dropRef=(0,_react.useRef)(null);// from: https://codesandbox.io/s/github/react-dnd/react-dnd/tree/gh-pages/examples_hooks_js/04-sortable/simple?from-embed
const[,drop]=(0,_reactDnd.useDrop)({accept:_ItemTypes.default.EDIT_RELATION,hover(item,monitor){if(!dropRef.current){return;}const dragIndex=item.index;const hoverIndex=index;// Don't replace items with themselves
if(dragIndex===hoverIndex){return;}// Determine rectangle on screen
const hoverBoundingRect=dropRef.current.getBoundingClientRect();// Get vertical middle
const hoverMiddleY=(hoverBoundingRect.bottom-hoverBoundingRect.top)/2;// Determine mouse position
const clientOffset=monitor.getClientOffset();// Get pixels to the top
const hoverClientY=clientOffset.y-hoverBoundingRect.top;// Only perform the move when the mouse has crossed half of the items height
// When dragging downwards, only move when the cursor is below 50%
// When dragging upwards, only move when the cursor is above 50%
// Dragging downwards
if(dragIndex<hoverIndex&&hoverClientY<hoverMiddleY){return;}// Dragging upwards
if(dragIndex>hoverIndex&&hoverClientY>hoverMiddleY){return;}// Time to actually perform the action
move(dragIndex,hoverIndex);// Note: we're mutating the monitor item here!
// Generally it's better to avoid mutations,
// but it's good here for the sake of performance
// to avoid expensive index searches.
item.index=hoverIndex;}});const[{isDragging},drag,preview]=(0,_reactDnd.useDrag)({item:{type:_ItemTypes.default.EDIT_RELATION,id:name,name,index},begin:()=>{// Remove the over state from other components
// Since it's a dynamic list where items are replaced on the fly we need to disable all the over state
setIsDraggingSibling(true);},end:()=>{setIsDraggingSibling(false);},collect:monitor=>({isDragging:monitor.isDragging()})});(0,_react.useEffect)(()=>{preview((0,_reactDndHtml5Backend.getEmptyImage)(),{captureDraggingState:false});},[preview]);// Create the refs
// We need 1 for the drop target
// 1 for the drag target
const refs={dragRef:drag(dragRef),dropRef:drop(dropRef)};return/*#__PURE__*/_react.default.createElement(_DraggedFieldWithPreview.default,{isDragging:isDragging,label:(0,_lodash.get)(metadatas,[name,'edit','label'],''),name:name,onClickEdit:()=>setEditFieldToSelect(name),onClickRemove:e=>{e.stopPropagation();removeItem(index);},push:goTo,ref:refs,selectedItem:selectedItemName,size:12,style:{marginBottom:6,paddingLeft:5,paddingRight:5},type:"relation",i:index===0});};Item.defaultProps={move:()=>{}};Item.propTypes={index:_propTypes.default.number.isRequired,move:_propTypes.default.func,name:_propTypes.default.string.isRequired,removeItem:_propTypes.default.func.isRequired};var _default=Item;exports.default=_default;

/***/ }),

/***/ 2376:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _pluginId=_interopRequireDefault(__webpack_require__(101));const getInputProps=fieldName=>{let type;switch(fieldName){case'description':case'label':case'placeholder':type='text';break;case'mainField':type='select';break;case'editable':type='bool';break;default:type='';}const labelId=fieldName==='mainField'?"".concat(_pluginId.default,".containers.SettingPage.editSettings.entry.title"):"".concat(_pluginId.default,".form.Input.").concat(fieldName);return{type,label:{id:labelId}};};var _default=getInputProps;exports.default=_default;

/***/ }),

/***/ 2377:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});exports.initialState=exports.default=void 0;var _immutable=__webpack_require__(33);var _lodash=__webpack_require__(10);var _layout=__webpack_require__(2291);const initialState=(0,_immutable.fromJS)({fieldForm:{},componentLayouts:{},metaToEdit:'',initialData:{},isLoading:true,metaForm:{},modifiedData:{}});exports.initialState=initialState;const reducer=(state,action)=>{const layoutPathEdit=['modifiedData','layouts','edit'];const layoutPathRelations=['modifiedData','layouts','editRelations'];switch(action.type){case'ADD_RELATION':return state.updateIn(layoutPathRelations,list=>list.push(action.name));case'GET_DATA_SUCCEEDED':{const data=(0,_lodash.cloneDeep)(action.data);(0,_lodash.set)(data,['layouts','edit'],(0,_layout.formatLayout)((0,_layout.createLayout)(data.layouts.edit)));return state.update('componentLayouts',()=>(0,_immutable.fromJS)(action.componentLayouts)).update('initialData',()=>(0,_immutable.fromJS)(data||{})).update('isLoading',()=>false).update('modifiedData',()=>(0,_immutable.fromJS)(data||{}));}case'MOVE_RELATION':{return state.updateIn(layoutPathRelations,list=>{return list.delete(action.dragIndex).insert(action.hoverIndex,state.getIn([...layoutPathRelations,action.dragIndex]));});}case'MOVE_ROW':return state.updateIn(layoutPathEdit,list=>{return list.delete(action.dragRowIndex).insert(action.hoverRowIndex,state.getIn([...layoutPathEdit,action.dragRowIndex]));});case'ON_ADD_DATA':{const size=(0,_layout.getInputSize)(state.getIn(['modifiedData','schema','attributes',action.name,'type']));const listSize=state.getIn(layoutPathEdit).size;const newList=state.getIn(layoutPathEdit).updateIn([listSize-1,'rowContent'],list=>{if(list){return list.push({name:action.name,size});}return(0,_immutable.fromJS)([{name:action.name,size}]);});const formattedList=(0,_layout.formatLayout)(newList.toJS());return state.updateIn(layoutPathEdit,()=>(0,_immutable.fromJS)(formattedList));}case'ON_CHANGE':return state.updateIn(['modifiedData',...action.keys],()=>action.value);case'ON_CHANGE_META':return state.updateIn(['metaForm',...action.keys],()=>action.value);case'ON_RESET':return state.update('modifiedData',()=>state.get('initialData'));case'REMOVE_FIELD':{const row=state.getIn([...layoutPathEdit,action.rowIndex,'rowContent']);let newState;// Delete the entire row if length is one or if lenght is equal to 2 and the second element is the hidden div used to make the dnd exp smoother
if(row.size===1||row.size===2&&row.getIn([1,'name'])==='_TEMP_'){newState=state.updateIn(layoutPathEdit,list=>list.delete(action.rowIndex));}else{newState=state.updateIn([...layoutPathEdit,action.rowIndex,'rowContent'],list=>list.delete(action.fieldIndex));}const updatedList=(0,_immutable.fromJS)((0,_layout.formatLayout)(newState.getIn(layoutPathEdit).toJS()));return state.updateIn(layoutPathEdit,()=>updatedList);}case'REMOVE_RELATION':return state.updateIn(layoutPathRelations,list=>list.delete(action.index));case'REORDER_DIFF_ROW':{const newState=state.updateIn([...layoutPathEdit,action.dragRowIndex,'rowContent'],list=>{return list.remove(action.dragIndex);}).updateIn([...layoutPathEdit,action.hoverRowIndex,'rowContent'],list=>{return list.insert(action.hoverIndex,state.getIn([...layoutPathEdit,action.dragRowIndex,'rowContent',action.dragIndex]));});const updatedList=(0,_layout.formatLayout)(newState.getIn(layoutPathEdit).toJS());return state.updateIn(layoutPathEdit,()=>(0,_immutable.fromJS)(updatedList));}case'REORDER_ROW':{const newState=state.updateIn([...layoutPathEdit,action.dragRowIndex,'rowContent'],list=>{return list.delete(action.dragIndex).insert(action.hoverIndex,list.get(action.dragIndex));});const updatedList=(0,_layout.formatLayout)(newState.getIn(layoutPathEdit).toJS());return state.updateIn(layoutPathEdit,()=>(0,_immutable.fromJS)(updatedList));}case'SET_FIELD_TO_EDIT':return state.update('metaToEdit',()=>action.name).updateIn(['metaForm'],()=>state.getIn(['modifiedData','metadatas',action.name,'edit']));case'SUBMIT_META_FORM':{const metaPath=['modifiedData','metadatas',state.get('metaToEdit'),'edit'];return state.updateIn(metaPath,()=>state.getIn(['metaForm']));}case'SUBMIT_SUCCEEDED':return state.update('initialData',()=>state.get('modifiedData'));case'UNSET_FIELD_TO_EDIT':return state.update('metaToEdit',()=>'').update('metaForm',()=>(0,_immutable.fromJS)({}));default:return state;}};var _default=reducer;exports.default=_default;

/***/ })

}]);